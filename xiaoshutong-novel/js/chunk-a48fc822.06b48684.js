(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a48fc822"],{"40e3":function(t,e,o){"use strict";o("4331")},4331:function(t,e,o){},"537b":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.currentChapter?o("div",{ref:"chap",staticClass:"chapter",class:t.backgroundColor,on:{click:function(e){return e.stopPropagation(),t.togglePopup(e)},touchstart:t.touchstart,touchmove:t.touchmove,touchend:t.touchend}},[o("div",{staticClass:"title",style:{fontSize:t.fontSize+2+"px"}},[t._v(" "+t._s(t.currentChapter.title)+" ")]),o("div",{staticClass:"content",style:{fontSize:t.fontSize+"px"}},[t._v(" "+t._s(t.currentContent)+" ")]),o("van-popup",{staticClass:"header",style:{height:"50px"},attrs:{overlay:!1,position:"top"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[o("div",{staticClass:"chapter-header"},[o("div",{staticClass:"back"},[o("van-icon",{attrs:{name:"arrow-left"}}),o("p",{on:{click:t.back}},[t._v("返回")])],1),o("div",{staticClass:"book-title"},[t._v(t._s(t.currentBook.title))]),o("div",{staticClass:"cata",on:{click:function(e){return e.stopPropagation(),t.clickCata(e)}}},[o("van-icon",{attrs:{name:"wap-nav"}})],1)])]),o("van-popup",{staticClass:"bottom",style:{height:"25%"},attrs:{position:"bottom",overlay:!1},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[o("div",{staticClass:"brightness"},[o("p",[t._v("亮度")]),o("van-slider",{attrs:{min:.2,max:1,step:.01,"active-color":"red","inactive-color":"#ccc","button-size":"18px","bar-height":"4px"},on:{input:t.changeBrightness},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),o("div",{staticClass:"font-size"},[o("p",[t._v("字号")]),o("van-button",{attrs:{type:"default",round:"",color:"#efefef"},on:{click:function(e){return e.stopPropagation(),t.decreaseFontSize(e)}}},[t._v("A-")]),o("div",{staticClass:"num"},[t._v(t._s(t.fontSize))]),o("van-button",{attrs:{type:"default",round:"",color:"#efefef"},on:{click:function(e){return e.stopPropagation(),t.increaseFontSize(e)}}},[t._v("A+")])],1),o("div",{staticClass:"background"},[o("p",[t._v("背景")]),o("div",{staticClass:"color"},t._l(t.bgc,(function(e,n){return o("div",{key:n,class:[e.name,t.backgroundColor==e.name?"img":null],on:{click:function(o){return o.stopPropagation(),t.changeBgc(e.name)}}})})),0)])]),o("van-popup",{style:{height:"100%",width:"70%"},attrs:{position:"left",closeable:""},model:{value:t.catalogueShow,callback:function(e){t.catalogueShow=e},expression:"catalogueShow"}},[t.currentBookSource?o("Catalogue",{attrs:{count:t.currentBookSource.chaptersCount,chapters:t.currentBookChapters,loading:t.cataLoading,active:t.currentChapter.title},on:{"close-all":t.closeAll}}):t._e()],1)],1):t._e()},a=[],i=(o("99af"),o("4de4"),o("a9e3"),o("ac1f"),o("5319"),o("9911"),o("5530")),r=o("2f62"),c=o("5dd4"),s={name:"Chapter",components:{Catalogue:c["a"]},data:function(){return{currentChapter:null,show:!1,catalogueShow:!1,cataLoading:!1,startX:0,distance:0,value:1,bgc:[{name:"light",color:"#fff"},{name:"dark",color:"#000"},{name:"yellow",color:"#eee6dd"},{name:"pink",color:"lightpink"},{name:"blue",color:"#d1d6f8"}],sTop:localStorage.getItem("".concat(this.$route.query.id,"123"))||0}},watch:{"$route.query.index":function(){this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.getContent()},currentChapter:function(){this.$nextTick((function(){window.scrollTo(0,this.sTop)}))}},beforeRouteLeave:function(t,e,o){this.$emit("update:showFooter",!0);var n=document.documentElement;n.style.filter="brightness(1)";var a=this.$route.query.id,i=this.$route.query.index;localStorage.setItem(a,i),localStorage.setItem("".concat(this.$route.query.id,"123"),document.documentElement.scrollTop),o()},computed:Object(i["a"])(Object(i["a"])({},Object(r["c"])(["currentBook","currentBookSource","currentBookChapters","brightness","fontSize","backgroundColor"])),{},{currentContent:function(){return this.currentChapter.isVip?"后续为付费章节需购买后方可继续阅读":this.currentChapter.cpContent}}),created:function(){var t=this;if(this.value=this.brightness,this.$emit("update:showFooter",!1),console.log("chapter---created"),this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.currentBook)this.getContent();else{this.axios.get("/book-info/".concat(this.$route.query.id)).then((function(e){t.$store.commit("updateCurrentBook",e.data)}));var e=this.axios.get("/book-sources?view=summary&book=".concat(this.$route.query.id)).then((function(e){t.$store.commit("updateCurrentBookSource",e.data[0])}));e.then((function(){t.axios.get("/book-chapters/".concat(t.currentBookSource._id)).then((function(e){t.$store.commit("updateCurrentBookChapters",e.data.chapters)})).then((function(){t.getContent()}))}))}},mounted:function(){var t=document.documentElement;t.style.filter="brightness(".concat(this.brightness,")")},methods:{back:function(){this.$router.back()},closeAll:function(){this.catalogueShow=!1,this.cataLoading=!1},togglePopup:function(){this.show=!this.show},clickCata:function(){this.show=!1,this.catalogueShow=!0},getContent:function(){var t=this;this.axios.get("http://novel.kele8.cn/chapters/"+encodeURIComponent(this.currentBookChapters[this.$route.query.index].link)).then((function(e){t.currentChapter=e.data.chapter,t.$toast.clear()}))},touchstart:function(t){this.startX=t.touches[0].clientX},touchmove:function(t){this.distance=Math.floor(t.touches[0].clientX-this.startX)},touchend:function(){if(this.distance>100){if(Number(this.$route.query.index)-1<0)return;this.sTop=0,this.$router.replace("/chapter?id=".concat(this.currentBook._id,"&index=").concat(Number(this.$route.query.index)-1)).catch((function(t){return t}))}else if(this.distance<-100){if(Number(this.$route.query.index)+1>this.currentBookChapters.length-1)return;this.sTop=0,this.$router.replace("/chapter?id=".concat(this.currentBook._id,"&index=").concat(Number(this.$route.query.index)+1))}this.startX=0,this.distance=0},changeBrightness:function(t){var e=document.documentElement;this.$store.commit("updateBrightness",t),e.style.filter="brightness(".concat(t,")")},increaseFontSize:function(){var t=this.fontSize+1;t>22&&(t=22),this.$store.commit("updateFontSize",t)},decreaseFontSize:function(){var t=this.fontSize-1;t<10&&(t=10),this.$store.commit("updateFontSize",t)},changeBgc:function(t){this.$store.commit("updateBackgroundColor",t)}}},u=s,h=(o("40e3"),o("2877")),l=Object(h["a"])(u,n,a,!1,null,"030abcaa",null);e["default"]=l.exports},"857a":function(t,e,o){var n=o("1d80"),a=/"/g;t.exports=function(t,e,o,i){var r=String(n(t)),c="<"+e;return""!==o&&(c+=" "+o+'="'+String(i).replace(a,"&quot;")+'"'),c+">"+r+"</"+e+">"}},9911:function(t,e,o){"use strict";var n=o("23e7"),a=o("857a"),i=o("af03");n({target:"String",proto:!0,forced:i("link")},{link:function(t){return a(this,"a","href",t)}})},af03:function(t,e,o){var n=o("d039");t.exports=function(t){return n((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}}}]);
//# sourceMappingURL=chunk-a48fc822.06b48684.js.map