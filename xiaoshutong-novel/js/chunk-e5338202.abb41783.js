(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e5338202"],{"0418":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("van-icon",{staticClass:"left",attrs:{name:"arrow-left"},on:{click:t.back}}),a("p",[t._t("default")],2),t.star&&!t.loading?[t.bool?a("van-icon",{staticClass:"right",class:{active:t.collect},attrs:{name:"star"},on:{click:t.remove}}):a("van-icon",{staticClass:"right",attrs:{name:"star-o"},on:{click:t.add}})]:t._e()],2)},i=[],r=(a("4160"),a("159b"),a("5530")),c=a("2f62"),s={name:"Header",props:["loading"],computed:Object(r["a"])(Object(r["a"])({},Object(c["c"])(["star","collect","currentBook"])),{},{bool:function(){var t=this,e=!1;return this.collect.length&&this.collect.forEach((function(a){a.id==t.$route.query.id&&(e=!0)})),e}}),methods:Object(r["a"])(Object(r["a"])({},Object(c["b"])(["removeCollect","addCollect"])),{},{back:function(){this.$router.back()},add:function(){var t=this.currentBook,e=t._id,a=t.cover,n=t.title;this.addCollect({id:e,img:a,title:n})},remove:function(){this.removeCollect(this.$route.query.id)}})},o=s,l=(a("75bc"),a("2877")),u=Object(l["a"])(o,n,i,!1,null,"4408bcba",null);e["a"]=u.exports},"07ea":function(t,e,a){},"14c3":function(t,e,a){var n=a("c6b6"),i=a("9263");t.exports=function(t,e){var a=t.exec;if("function"===typeof a){var r=a.call(t,e);if("object"!==typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==n(t))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},"1f2f":function(t,e,a){"use strict";a("278a")},"278a":function(t,e,a){},"4c8e":function(t,e,a){"use strict";a("07ea")},5319:function(t,e,a){"use strict";var n=a("d784"),i=a("825a"),r=a("7b0b"),c=a("50c4"),s=a("a691"),o=a("1d80"),l=a("8aa5"),u=a("14c3"),f=Math.max,d=Math.min,v=Math.floor,h=/\$([$&'`]|\d\d?|<[^>]*>)/g,p=/\$([$&'`]|\d\d?)/g,g=function(t){return void 0===t?t:String(t)};n("replace",2,(function(t,e,a,n){var b=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,k=n.REPLACE_KEEPS_$0,m=b?"$":"$0";return[function(a,n){var i=o(this),r=void 0==a?void 0:a[t];return void 0!==r?r.call(a,i,n):e.call(String(i),a,n)},function(t,n){if(!b&&k||"string"===typeof n&&-1===n.indexOf(m)){var r=a(e,t,this,n);if(r.done)return r.value}var o=i(t),v=String(this),h="function"===typeof n;h||(n=String(n));var p=o.global;if(p){var x=o.unicode;o.lastIndex=0}var E=[];while(1){var _=u(o,v);if(null===_)break;if(E.push(_),!p)break;var C=String(_[0]);""===C&&(o.lastIndex=l(v,c(o.lastIndex),x))}for(var R="",S=0,I=0;I<E.length;I++){_=E[I];for(var $=String(_[0]),O=f(d(s(_.index),v.length),0),D=[],A=1;A<_.length;A++)D.push(g(_[A]));var K=_.groups;if(h){var j=[$].concat(D,O,v);void 0!==K&&j.push(K);var w=String(n.apply(void 0,j))}else w=y($,v,O,D,K,n);O>=S&&(R+=v.slice(S,O)+w,S=O+$.length)}return R+v.slice(S)}];function y(t,a,n,i,c,s){var o=n+t.length,l=i.length,u=p;return void 0!==c&&(c=r(c),u=h),e.call(s,u,(function(e,r){var s;switch(r.charAt(0)){case"$":return"$";case"&":return t;case"`":return a.slice(0,n);case"'":return a.slice(o);case"<":s=c[r.slice(1,-1)];break;default:var u=+r;if(0===u)return e;if(u>l){var f=v(u/10);return 0===f?e:f<=l?void 0===i[f-1]?r.charAt(1):i[f-1]+r.charAt(1):e}s=i[u-1]}return void 0===s?"":s}))}}))},"5bcd":function(t,e,a){},6547:function(t,e,a){var n=a("a691"),i=a("1d80"),r=function(t){return function(e,a){var r,c,s=String(i(e)),o=n(a),l=s.length;return o<0||o>=l?t?"":void 0:(r=s.charCodeAt(o),r<55296||r>56319||o+1===l||(c=s.charCodeAt(o+1))<56320||c>57343?t?s.charAt(o):r:t?s.slice(o,o+2):c-56320+(r-55296<<10)+65536)}};t.exports={codeAt:r(!1),charAt:r(!0)}},"75bc":function(t,e,a){"use strict";a("5bcd")},"789b":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rank"},[a("Header",[t._v("排行榜")]),a("div",{staticClass:"empty"}),a("HomeNav",{staticClass:"hn",attrs:{titles:t.titles,gender:t.type},on:{"navigate-to":t.navigate}}),a("div",{staticClass:"main"},[t.rankList?a("van-sidebar",{model:{value:t.activeKey,callback:function(e){t.activeKey=e},expression:"activeKey"}},t._l(t.lists,(function(t,e){return a("van-sidebar-item",{key:e,attrs:{title:t.title}})})),1):t._e(),a("ul",{staticClass:"content"},[a("van-skeleton",{attrs:{title:"",avatar:"",row:3,loading:t.loading,"avatar-shape":"square"}},t._l(t.rankDetail,(function(t,e){return a("CateBookItem",{key:e,attrs:{book:t}})})),1)],1)],1)],1)},i=[],r=(a("ac1f"),a("5319"),a("5530")),c=a("2f62"),s=a("87c4"),o=a("f91b"),l=a("0418"),u={name:"Rank",components:{HomeNav:s["a"],CateBookItem:o["a"],Header:l["a"]},data:function(){return{type:"epub",activeKey:0,titles:[{id:0,name:"出版",type:"epub",path:"/rank?type=epub"},{id:1,name:"男生",type:"male",path:"/rank?type=male"},{id:2,name:"女生",type:"female",path:"/rank?type=female"}],rankDetail:[],loading:!0}},computed:Object(r["a"])(Object(r["a"])({},Object(c["c"])(["rankList"])),{},{lists:function(){return"epub"==this.type?this.rankList.epub:"male"==this.type?this.rankList.male:this.rankList.female}}),created:function(){var t=this;if(this.rankList){if(sessionStorage.getItem("".concat(this.lists[this.activeKey]._id))){var e=JSON.parse(sessionStorage.getItem("".concat(this.lists[this.activeKey]._id)));return void(this.rankDetail=e)}this.getRankDetail()}else this.axios.get("/rank-category").then((function(e){t.$store.commit("updateRankList",e.data),t.getRankDetail()}))},watch:{activeKey:function(){if(this.loading=!0,sessionStorage.getItem("".concat(this.lists[this.activeKey]._id))){var t=JSON.parse(sessionStorage.getItem("".concat(this.lists[this.activeKey]._id)));this.rankDetail=t}else this.getRankDetail()},"$route.query.type":function(){if(this.activeKey=0,sessionStorage.getItem("".concat(this.lists[this.activeKey]._id))){var t=JSON.parse(sessionStorage.getItem("".concat(this.lists[this.activeKey]._id)));this.rankDetail=t}else this.getRankDetail()},rankDetail:function(){console.log("rankDetail"),this.loading=!1}},beforeRouteEnter:function(t,e,a){a((function(e){e.type=t.query.type||"epub"}))},beforeRouteUpdate:function(t,e,a){this.type=t.query.type||"epub",a()},methods:{navigate:function(t){this.$router.replace("/rank?type=".concat(t)).catch((function(t){return t}))},getRankDetail:function(){var t=this;this.axios.get("/rank/".concat(this.lists[this.activeKey]._id)).then((function(e){t.rankDetail=e.data.ranking.books;var a=JSON.stringify(e.data.ranking.books);sessionStorage.setItem("".concat(t.lists[t.activeKey]._id),a)}))}}},f=u,d=(a("4c8e"),a("2877")),v=Object(d["a"])(f,n,i,!1,null,"382a4801",null);e["default"]=v.exports},"8aa5":function(t,e,a){"use strict";var n=a("6547").charAt;t.exports=function(t,e,a){return e+(a?n(t,e).length:1)}},9263:function(t,e,a){"use strict";var n=a("ad6d"),i=a("9f7f"),r=RegExp.prototype.exec,c=String.prototype.replace,s=r,o=function(){var t=/a/,e=/b*/g;return r.call(t,"a"),r.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),l=i.UNSUPPORTED_Y||i.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],f=o||u||l;f&&(s=function(t){var e,a,i,s,f=this,d=l&&f.sticky,v=n.call(f),h=f.source,p=0,g=t;return d&&(v=v.replace("y",""),-1===v.indexOf("g")&&(v+="g"),g=String(t).slice(f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==t[f.lastIndex-1])&&(h="(?: "+h+")",g=" "+g,p++),a=new RegExp("^(?:"+h+")",v)),u&&(a=new RegExp("^"+h+"$(?!\\s)",v)),o&&(e=f.lastIndex),i=r.call(d?a:f,g),d?i?(i.input=i.input.slice(p),i[0]=i[0].slice(p),i.index=f.lastIndex,f.lastIndex+=i[0].length):f.lastIndex=0:o&&i&&(f.lastIndex=f.global?i.index+i[0].length:e),u&&i&&i.length>1&&c.call(i[0],a,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(i[s]=void 0)})),i}),t.exports=s},"9f7f":function(t,e,a){"use strict";var n=a("d039");function i(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=n((function(){var t=i("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=n((function(){var t=i("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},ac1f:function(t,e,a){"use strict";var n=a("23e7"),i=a("9263");n({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},ad6d:function(t,e,a){"use strict";var n=a("825a");t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},d784:function(t,e,a){"use strict";a("ac1f");var n=a("6eeb"),i=a("d039"),r=a("b622"),c=a("9263"),s=a("9112"),o=r("species"),l=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),f=r("replace"),d=function(){return!!/./[f]&&""===/./[f]("a","$0")}(),v=!i((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var a="ab".split(t);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));t.exports=function(t,e,a,f){var h=r(t),p=!i((function(){var e={};return e[h]=function(){return 7},7!=""[t](e)})),g=p&&!i((function(){var e=!1,a=/a/;return"split"===t&&(a={},a.constructor={},a.constructor[o]=function(){return a},a.flags="",a[h]=/./[h]),a.exec=function(){return e=!0,null},a[h](""),!e}));if(!p||!g||"replace"===t&&(!l||!u||d)||"split"===t&&!v){var b=/./[h],k=a(h,""[t],(function(t,e,a,n,i){return e.exec===c?p&&!i?{done:!0,value:b.call(e,a,n)}:{done:!0,value:t.call(a,e,n)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),m=k[0],y=k[1];n(String.prototype,t,m),n(RegExp.prototype,h,2==e?function(t,e){return y.call(t,this,e)}:function(t){return y.call(t,this)})}f&&s(RegExp.prototype[h],"sham",!0)}},f91b:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"cate-book-item",on:{click:t.toDetail}},[a("div",{staticClass:"pic"},[a("van-image",{attrs:{"lazy-load":"",src:"http://statics.zhuishushenqi.com"+t.book.cover}})],1),a("div",{staticClass:"info"},[a("div",{staticClass:"name"},[t._v(t._s(t.book.title))]),a("div",{staticClass:"desc"},[t._v(t._s(t.book.shortIntro))]),a("div",{staticClass:"bottom"},[a("span",{staticClass:"author"},[t._v(t._s(t.book.author))]),a("span",{staticClass:"category"},[t._v(t._s(t.book.majorCate))])])])])},i=[],r={name:"CateBookItem",props:["book"],methods:{toDetail:function(){this.$router.push({name:"BookDetail",query:{id:this.book._id}})}}},c=r,s=(a("1f2f"),a("2877")),o=Object(s["a"])(c,n,i,!1,null,"51eda1ff",null);e["a"]=o.exports}}]);
//# sourceMappingURL=chunk-e5338202.abb41783.js.map