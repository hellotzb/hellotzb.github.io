{"version":3,"sources":["webpack:///./src/views/Chapter.vue?e502","webpack:///./src/views/Chapter.vue?3d85","webpack:///src/views/Chapter.vue","webpack:///./src/views/Chapter.vue?cd7c","webpack:///./src/views/Chapter.vue","webpack:///./node_modules/core-js/internals/create-html.js","webpack:///./node_modules/core-js/modules/es.string.link.js","webpack:///./node_modules/core-js/internals/string-html-forced.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","staticClass","class","backgroundColor","on","$event","stopPropagation","togglePopup","touchstart","touchmove","touchend","style","fontSize","_v","_s","currentChapter","title","currentContent","height","attrs","model","value","callback","$$v","show","expression","back","currentBook","clickCata","changeBrightness","decreaseFontSize","increaseFontSize","_l","item","index","key","name","changeBgc","width","catalogueShow","currentBookSource","chaptersCount","currentBookChapters","cataLoading","closeAll","_e","staticRenderFns","components","Catalogue","data","startX","distance","bgc","sTop","localStorage","getItem","watch","$toast","loading","message","forbidClick","duration","getContent","$nextTick","window","scrollTo","beforeRouteLeave","$emit","htmlEle","document","documentElement","filter","bookId","$route","query","id","setItem","next","computed","isVip","cpContent","created","brightness","console","log","axios","get","getSource","then","mounted","methods","$router","e","touches","clientX","Math","floor","Number","replace","$store","commit","val","newVal","color","component","requireObjectCoercible","quot","module","exports","string","tag","attribute","S","String","p1","$","createHTML","forcedStringHTMLMethod","target","proto","forced","link","url","fails","METHOD_NAME","test","toLowerCase","split","length"],"mappings":"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","file":"js/chunk-a48fc822.06b48684.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chapter.vue?vue&type=style&index=0&id=030abcaa&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.currentChapter)?_c('div',{ref:\"chap\",staticClass:\"chapter\",class:_vm.backgroundColor,on:{\"click\":function($event){$event.stopPropagation();return _vm.togglePopup($event)},\"touchstart\":_vm.touchstart,\"touchmove\":_vm.touchmove,\"touchend\":_vm.touchend}},[_c('div',{staticClass:\"title\",style:({ fontSize: ((_vm.fontSize + 2) + \"px\") })},[_vm._v(\" \"+_vm._s(_vm.currentChapter.title)+\" \")]),_c('div',{staticClass:\"content\",style:({ fontSize: (_vm.fontSize + \"px\") })},[_vm._v(\" \"+_vm._s(_vm.currentContent)+\" \")]),_c('van-popup',{staticClass:\"header\",style:({ height: '50px' }),attrs:{\"overlay\":false,\"position\":\"top\"},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('div',{staticClass:\"chapter-header\"},[_c('div',{staticClass:\"back\"},[_c('van-icon',{attrs:{\"name\":\"arrow-left\"}}),_c('p',{on:{\"click\":_vm.back}},[_vm._v(\"返回\")])],1),_c('div',{staticClass:\"book-title\"},[_vm._v(_vm._s(_vm.currentBook.title))]),_c('div',{staticClass:\"cata\",on:{\"click\":function($event){$event.stopPropagation();return _vm.clickCata($event)}}},[_c('van-icon',{attrs:{\"name\":\"wap-nav\"}})],1)])]),_c('van-popup',{staticClass:\"bottom\",style:({ height: '25%' }),attrs:{\"position\":\"bottom\",\"overlay\":false},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('div',{staticClass:\"brightness\"},[_c('p',[_vm._v(\"亮度\")]),_c('van-slider',{attrs:{\"min\":0.2,\"max\":1,\"step\":0.01,\"active-color\":\"red\",\"inactive-color\":\"#ccc\",\"button-size\":\"18px\",\"bar-height\":\"4px\"},on:{\"input\":_vm.changeBrightness},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1),_c('div',{staticClass:\"font-size\"},[_c('p',[_vm._v(\"字号\")]),_c('van-button',{attrs:{\"type\":\"default\",\"round\":\"\",\"color\":\"#efefef\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.decreaseFontSize($event)}}},[_vm._v(\"A-\")]),_c('div',{staticClass:\"num\"},[_vm._v(_vm._s(_vm.fontSize))]),_c('van-button',{attrs:{\"type\":\"default\",\"round\":\"\",\"color\":\"#efefef\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.increaseFontSize($event)}}},[_vm._v(\"A+\")])],1),_c('div',{staticClass:\"background\"},[_c('p',[_vm._v(\"背景\")]),_c('div',{staticClass:\"color\"},_vm._l((_vm.bgc),function(item,index){return _c('div',{key:index,class:[item.name, _vm.backgroundColor == item.name ? 'img' : null],on:{\"click\":function($event){$event.stopPropagation();return _vm.changeBgc(item.name)}}})}),0)])]),_c('van-popup',{style:({ height: '100%', width: '70%' }),attrs:{\"position\":\"left\",\"closeable\":\"\"},model:{value:(_vm.catalogueShow),callback:function ($$v) {_vm.catalogueShow=$$v},expression:\"catalogueShow\"}},[(_vm.currentBookSource)?_c('Catalogue',{attrs:{\"count\":_vm.currentBookSource.chaptersCount,\"chapters\":_vm.currentBookChapters,\"loading\":_vm.cataLoading,\"active\":_vm.currentChapter.title},on:{\"close-all\":_vm.closeAll}}):_vm._e()],1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <!-- filter和position:fixed会冲突 -->\r\n  <!-- vue同路由不同参数实现跳转 -->\r\n  <div\r\n    class=\"chapter\"\r\n    v-if=\"currentChapter\"\r\n    @click.stop=\"togglePopup\"\r\n    @touchstart=\"touchstart\"\r\n    @touchmove=\"touchmove\"\r\n    @touchend=\"touchend\"\r\n    ref=\"chap\"\r\n    :class=\"backgroundColor\"\r\n  >\r\n    <div class=\"title\" :style=\"{ fontSize: `${fontSize + 2}px` }\">\r\n      {{ currentChapter.title }}\r\n    </div>\r\n    <div class=\"content\" :style=\"{ fontSize: `${fontSize}px` }\">\r\n      {{ currentContent }}\r\n    </div>\r\n\r\n    <van-popup\r\n      class=\"header\"\r\n      :overlay=\"false\"\r\n      v-model=\"show\"\r\n      position=\"top\"\r\n      :style=\"{ height: '50px' }\"\r\n    >\r\n      <div class=\"chapter-header\">\r\n        <div class=\"back\">\r\n          <van-icon name=\"arrow-left\" />\r\n          <p @click=\"back\">返回</p>\r\n        </div>\r\n        <div class=\"book-title\">{{ currentBook.title }}</div>\r\n\r\n        <div class=\"cata\" @click.stop=\"clickCata\">\r\n          <van-icon name=\"wap-nav\" />\r\n        </div>\r\n      </div>\r\n    </van-popup>\r\n\r\n    <van-popup\r\n      class=\"bottom\"\r\n      v-model=\"show\"\r\n      position=\"bottom\"\r\n      :overlay=\"false\"\r\n      :style=\"{ height: '25%' }\"\r\n    >\r\n      <div class=\"brightness\">\r\n        <p>亮度</p>\r\n        <van-slider\r\n          v-model=\"value\"\r\n          :min=\"0.2\"\r\n          :max=\"1\"\r\n          :step=\"0.01\"\r\n          active-color=\"red\"\r\n          inactive-color=\"#ccc\"\r\n          button-size=\"18px\"\r\n          bar-height=\"4px\"\r\n          @input=\"changeBrightness\"\r\n        />\r\n      </div>\r\n      <div class=\"font-size\">\r\n        <p>字号</p>\r\n        <van-button\r\n          type=\"default\"\r\n          round\r\n          color=\"#efefef\"\r\n          @click.stop=\"decreaseFontSize\"\r\n          >A-</van-button\r\n        >\r\n        <div class=\"num\">{{ fontSize }}</div>\r\n        <van-button\r\n          type=\"default\"\r\n          round\r\n          color=\"#efefef\"\r\n          @click.stop=\"increaseFontSize\"\r\n          >A+</van-button\r\n        >\r\n      </div>\r\n      <div class=\"background\">\r\n        <p>背景</p>\r\n        <div class=\"color\">\r\n          <div\r\n            v-for=\"(item, index) in bgc\"\r\n            :key=\"index\"\r\n            :class=\"[item.name, backgroundColor == item.name ? 'img' : null]\"\r\n            @click.stop=\"changeBgc(item.name)\"\r\n          ></div>\r\n        </div>\r\n      </div>\r\n    </van-popup>\r\n\r\n    <van-popup\r\n      v-model=\"catalogueShow\"\r\n      position=\"left\"\r\n      closeable\r\n      :style=\"{ height: '100%', width: '70%' }\"\r\n    >\r\n      <Catalogue\r\n        v-if=\"currentBookSource\"\r\n        :count=\"currentBookSource.chaptersCount\"\r\n        :chapters=\"currentBookChapters\"\r\n        :loading=\"cataLoading\"\r\n        :active=\"currentChapter.title\"\r\n        @close-all=\"closeAll\"\r\n      ></Catalogue>\r\n    </van-popup>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\";\r\nimport Catalogue from \"@/components/Catalogue.vue\";\r\n\r\nexport default {\r\n  name: \"Chapter\",\r\n  components: {\r\n    Catalogue,\r\n  },\r\n  data() {\r\n    return {\r\n      currentChapter: null, //当前章节\r\n      show: false, // 头部显示\r\n      catalogueShow: false, // 目录显示\r\n      cataLoading: false, //目录加载\r\n      startX: 0, //手指开始滑动的位置\r\n      distance: 0, //手指滑动距离\r\n      value: 1, //亮度\r\n      bgc: [\r\n        {\r\n          name: \"light\",\r\n          color: \"#fff\",\r\n        },\r\n        {\r\n          name: \"dark\",\r\n          color: \"#000\",\r\n        },\r\n        {\r\n          name: \"yellow\",\r\n          color: \"#eee6dd\",\r\n        },\r\n        {\r\n          name: \"pink\",\r\n          color: \"lightpink\",\r\n        },\r\n        {\r\n          name: \"blue\",\r\n          color: \"#d1d6f8\",\r\n        },\r\n      ],\r\n      sTop: localStorage.getItem(`${this.$route.query.id}123`) || 0,\r\n    };\r\n  },\r\n  watch: {\r\n    \"$route.query.index\"() {\r\n      this.$toast.loading({\r\n        message: \"加载中...\",\r\n        forbidClick: true,\r\n        duration: 0,\r\n      });\r\n      this.getContent();\r\n    },\r\n    currentChapter() {\r\n      this.$nextTick(function () {\r\n        window.scrollTo(0,this.sTop);\r\n      });\r\n    },\r\n  },\r\n  beforeRouteLeave(to, from, next) {\r\n    this.$emit(\"update:showFooter\", true);\r\n    var htmlEle = document.documentElement;\r\n    htmlEle.style.filter = `brightness(1)`;\r\n\r\n    var bookId = this.$route.query.id;\r\n    var index = this.$route.query.index;\r\n    localStorage.setItem(bookId, index);\r\n    localStorage.setItem(`${this.$route.query.id}123`, document.documentElement.scrollTop);\r\n    next();\r\n  },\r\n  computed: {\r\n    ...mapState([\r\n      \"currentBook\",\r\n      \"currentBookSource\",\r\n      \"currentBookChapters\",\r\n      \"brightness\",\r\n      \"fontSize\",\r\n      \"backgroundColor\",\r\n    ]),\r\n    currentContent() {\r\n      if (this.currentChapter.isVip) {\r\n        return \"后续为付费章节需购买后方可继续阅读\";\r\n      } else {\r\n        return this.currentChapter.cpContent;\r\n      }\r\n    },\r\n  },\r\n  created() {\r\n    this.value = this.brightness;\r\n    this.$emit(\"update:showFooter\", false);\r\n\r\n    console.log(\"chapter---created\");\r\n    this.$toast.loading({\r\n      message: \"加载中...\",\r\n      forbidClick: true,\r\n      duration: 0,\r\n    });\r\n\r\n    if (!this.currentBook) {\r\n      this.axios.get(`/book-info/${this.$route.query.id}`).then((response) => {\r\n        // console.log(response.data);\r\n        this.$store.commit(\"updateCurrentBook\", response.data);\r\n      });\r\n\r\n      var getSource = this.axios\r\n        .get(`/book-sources?view=summary&book=${this.$route.query.id}`)\r\n        .then((response) => {\r\n          this.$store.commit(\"updateCurrentBookSource\", response.data[0]);\r\n        });\r\n\r\n      getSource.then(() => {\r\n        this.axios\r\n          .get(`/book-chapters/${this.currentBookSource._id}`)\r\n          .then((response) => {\r\n            // console.log(response.data.chapters);\r\n            this.$store.commit(\r\n              \"updateCurrentBookChapters\",\r\n              response.data.chapters\r\n            );\r\n          })\r\n          .then(() => {\r\n            this.getContent();\r\n          });\r\n      });\r\n    } else {\r\n      this.getContent();\r\n    }\r\n  },\r\n  mounted() {\r\n    var htmlEle = document.documentElement;\r\n    htmlEle.style.filter = `brightness(${this.brightness})`;\r\n    // window.addEventListener(\"scroll\", ()=> {\r\n    //   console.log(document.documentElement.scrollTop); \r\n    // });\r\n  },\r\n  methods: {\r\n    back() {\r\n      this.$router.back();\r\n    },\r\n    closeAll() {\r\n      this.catalogueShow = false;\r\n      this.cataLoading = false;\r\n    },\r\n    togglePopup() {\r\n      this.show = !this.show;\r\n    },\r\n    clickCata() {\r\n      this.show = false;\r\n      this.catalogueShow = true;\r\n    },\r\n    getContent() {\r\n      this.axios\r\n        .get(\r\n          \"http://novel.kele8.cn/chapters/\" +\r\n            encodeURIComponent(\r\n              this.currentBookChapters[this.$route.query.index].link\r\n            )\r\n        )\r\n        .then((response) => {\r\n          this.currentChapter = response.data.chapter;\r\n          // console.log(this.currentChapter);\r\n          this.$toast.clear();\r\n        });\r\n    },\r\n    touchstart(e) {\r\n      this.startX = e.touches[0].clientX;\r\n      // console.log(this.startX);\r\n    },\r\n    touchmove(e) {\r\n      this.distance = Math.floor(e.touches[0].clientX - this.startX);\r\n      // console.log(this.distance);\r\n    },\r\n    touchend() {\r\n      // console.log(this.distance);\r\n      if (this.distance > 100) {\r\n        if (Number(this.$route.query.index) - 1 < 0) {\r\n          return;\r\n        }\r\n        this.sTop = 0\r\n        this.$router\r\n          .replace(\r\n            `/chapter?id=${this.currentBook._id}&index=${\r\n              Number(this.$route.query.index) - 1\r\n            }`\r\n          )\r\n          .catch((err) => err);\r\n      } else if (this.distance < -100) {\r\n        if (\r\n          Number(this.$route.query.index) + 1 >\r\n          this.currentBookChapters.length - 1\r\n        ) {\r\n          return;\r\n        }\r\n        this.sTop = 0\r\n        this.$router.replace(\r\n          `/chapter?id=${this.currentBook._id}&index=${\r\n            Number(this.$route.query.index) + 1\r\n          }`\r\n        );\r\n      }\r\n\r\n      this.startX = 0;\r\n      this.distance = 0;\r\n    },\r\n    changeBrightness(val) {\r\n      var htmlEle = document.documentElement;\r\n      this.$store.commit(\"updateBrightness\", val);\r\n      htmlEle.style.filter = `brightness(${val})`;\r\n    },\r\n    increaseFontSize() {\r\n      var newVal = this.fontSize + 1;\r\n      if (newVal > 22) {\r\n        newVal = 22;\r\n      }\r\n      this.$store.commit(\"updateFontSize\", newVal);\r\n    },\r\n    decreaseFontSize() {\r\n      var newVal = this.fontSize - 1;\r\n      if (newVal < 10) {\r\n        newVal = 10;\r\n      }\r\n      this.$store.commit(\"updateFontSize\", newVal);\r\n    },\r\n    changeBgc(color) {\r\n      this.$store.commit(\"updateBackgroundColor\", color);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.chapter {\r\n  min-height: 100vh;\r\n  overflow-x: hidden;\r\n  padding: 25px 0;\r\n  .title {\r\n    font-weight: bold;\r\n    text-align: center;\r\n  }\r\n  .content {\r\n    margin-top: 20px;\r\n    margin: 20px 20px 0 20px;\r\n    white-space: pre-wrap;\r\n  }\r\n  .van-popup.header {\r\n    background-color: rgba(0, 0, 0, 0.7);\r\n    color: white;\r\n    .chapter-header {\r\n      line-height: 50px;\r\n      .back {\r\n        font-size: 14px;\r\n        display: flex;\r\n        align-items: center;\r\n        position: absolute;\r\n        left: 5px;\r\n        top: 50%;\r\n        transform: translateY(-50%);\r\n        .van-icon {\r\n          font-size: 20px;\r\n        }\r\n      }\r\n      .book-title {\r\n        font-size: 16px;\r\n        width: 250px;\r\n        margin: 0 auto;\r\n        text-align: center;\r\n\r\n        word-wrap: break-word;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n        display: -webkit-box;\r\n        -webkit-line-clamp: 1; /*行数*/\r\n        -webkit-box-orient: vertical;\r\n      }\r\n      .cata {\r\n        position: absolute;\r\n        top: 50%;\r\n        transform: translateY(-50%);\r\n        right: 5px;\r\n        display: flex;\r\n        align-items: center;\r\n        .van-icon {\r\n          font-size: 25px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .van-popup.bottom {\r\n    color: #000;\r\n    .brightness {\r\n      margin-top: 20px;\r\n      display: flex;\r\n      // justify-content: center;\r\n      align-items: center;\r\n      > p {\r\n        flex-basis: 22%;\r\n        text-align: center;\r\n      }\r\n      .van-slider {\r\n        flex-basis: 60%;\r\n        margin-left: 10px;\r\n      }\r\n    }\r\n    .font-size {\r\n      display: flex;\r\n      align-items: center;\r\n      margin: 15px 0;\r\n      > p {\r\n        flex-basis: 22%;\r\n        text-align: center;\r\n      }\r\n      .van-button {\r\n        padding: 0 35px;\r\n        height: 35px;\r\n        .van-button__text {\r\n          color: #000;\r\n        }\r\n      }\r\n      .num {\r\n        margin: 0 6px;\r\n      }\r\n    }\r\n    .background {\r\n      display: flex;\r\n      align-items: center;\r\n      > p {\r\n        flex-basis: 22%;\r\n        text-align: center;\r\n      }\r\n      .color {\r\n        display: flex;\r\n        flex-basis: 65%;\r\n        justify-content: space-around;\r\n        > div {\r\n          width: 30px;\r\n          height: 30px;\r\n          border-radius: 50%;\r\n          border: 1px solid #000;\r\n        }\r\n        .img {\r\n          background-image: url(\"../assets/images/nike.png\");\r\n          background-position: center;\r\n          background-repeat: no-repeat;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n.light {\r\n  background-color: #fff;\r\n}\r\n.dark {\r\n  background-color: #000;\r\n  color: #ccc;\r\n}\r\n.yellow {\r\n  background-color: #eee6dd;\r\n}\r\n.pink {\r\n  background-color: lightpink;\r\n}\r\n.blue {\r\n  background-color: #d1d6f8;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chapter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chapter.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Chapter.vue?vue&type=template&id=030abcaa&scoped=true&\"\nimport script from \"./Chapter.vue?vue&type=script&lang=js&\"\nexport * from \"./Chapter.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Chapter.vue?vue&type=style&index=0&id=030abcaa&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"030abcaa\",\n  null\n  \n)\n\nexport default component.exports","var requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar quot = /\"/g;\n\n// B.2.3.2.1 CreateHTML(string, tag, attribute, value)\n// https://tc39.github.io/ecma262/#sec-createhtml\nmodule.exports = function (string, tag, attribute, value) {\n  var S = String(requireObjectCoercible(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + String(value).replace(quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.link` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.link\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('link') }, {\n  link: function link(url) {\n    return createHTML(this, 'a', 'href', url);\n  }\n});\n","var fails = require('../internals/fails');\n\n// check the existence of a method, lowercase\n// of a tag and escaping quotes in arguments\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    var test = ''[METHOD_NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  });\n};\n"],"sourceRoot":""}