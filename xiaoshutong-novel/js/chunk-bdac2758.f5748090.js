(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bdac2758"],{"296d":function(t,e,r){},"2d3b":function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"search"},[r("div",{staticClass:"header"},[r("van-search",{attrs:{shape:"round",placeholder:"请输入关键字"},on:{focus:t.focus},model:{value:t.msg,callback:function(e){t.msg=e},expression:"msg"}})],1),t.$route.query.name?r("div",{staticClass:"search-book"},[r("van-skeleton",{attrs:{title:"",avatar:"",row:3,loading:t.loading,"avatar-shape":"square"}},[r("ul",{staticClass:"content"},t._l(t.searchs,(function(t,e){return r("ListItem",{key:e,attrs:{book:t}})})),1)])],1):r("div",{staticClass:"main"},[t.isRecommend?r("div",{staticClass:"recommend"},[r("div",{staticClass:"title"},[t._v("热门推荐")]),r("ul",{staticClass:"hot"},t._l(t.searchHotWords,(function(e,s){return r("li",{key:s,on:{click:function(r){return t.navigate(e.word)}}},[t._v(" "+t._s(e.word)+" ")])})),0),t.searchHistory.length>0?r("div",{staticClass:"history"},[r("div",{staticClass:"title"},[t._v("搜索历史")]),r("ul",t._l(t.searchHistory,(function(e,s){return r("li",{key:s},[r("div",{staticClass:"name",on:{click:function(e){return t.navigate(t.searchHistory[s])}}},[t._v(" "+t._s(t.searchHistory[s])+" ")]),r("div",{staticClass:"delete",on:{click:function(e){return t.deleteHistory(s)}}},[r("van-icon",{attrs:{name:"cross"}})],1)])})),0),r("div",{staticClass:"clear-all",on:{click:t.clearAll}},[t._v("清空所有历史记录")])]):t._e()]):r("div",{staticClass:"searching"},[t.searchs?r("ul",{staticClass:"content"},t._l(t.searchs.slice(0,10),(function(e){return r("li",{key:e._id,on:{click:function(r){return t.navigate(e.title)}}},[t._v(" "+t._s(e.title)+" "),r("van-divider",{style:{backgroundColor:"#fff",borderColor:"#ddd",margin:0,padding:"0 10px"}})],1)})),0):t._e()])])])},o=[],a=(r("99af"),r("fb6a"),r("a434"),r("b0c0"),r("498a"),r("5530")),i=r("2f62"),n=r("af40"),c={name:"Search",components:{ListItem:n["a"]},data:function(){return{searchHotWords:[],searchs:null,msg:"",loading:!0}},computed:Object(a["a"])({},Object(i["c"])(["searchHistory","isRecommend"])),created:function(){var t=this;this.axios.get("/search-hotwords").then((function(e){t.searchHotWords=e.data.searchHotWords.slice(0,10)})),this.$route.query.name&&this.axios.get("/search?keyword=".concat(this.$route.query.name)).then((function(e){t.searchs=e.data.books,t.loading=!1,t.msg=t.$route.query.name})).catch((function(){}))},watch:{msg:function(){var t=this;this.msg.trim()?(clearTimeout(this.timer),this.timer=setTimeout((function(){""!=t.msg&&(t.$store.commit("updateIsRecommend",!1),t.axios.get("/search?keyword=".concat(t.msg)).then((function(e){t.searchs=e.data.books})).catch((function(){})))}),500)):this.$store.commit("updateIsRecommend",!0)},"$route.query.name":function(){var t=this;this.axios.get("/search?keyword=".concat(this.msg)).then((function(e){t.searchs=e.data.books,t.loading=!1})).catch((function(){}))}},beforeRouteLeave:function(t,e,r){console.log("search--beforeRouteLeave"),this.$store.commit("updateIsRecommend",!0),r()},methods:{focus:function(){"Search"!=this.$route.name||this.$route.query.name?this.$router.push({name:"Search"}):console.log()},navigate:function(t){this.msg=t,this.$router.push({name:"Search",query:{name:t}}),this.$store.commit("updateSearchHistory",this.$route.query.name)},deleteHistory:function(t){var e=this.searchHistory.concat();e.splice(t,1),this.$store.commit("resetSearchHistory",e)},clearAll:function(){this.$store.commit("resetSearchHistory",[])}}},u=c,l=(r("96cb"),r("2877")),d=Object(l["a"])(u,s,o,!1,null,"cd6f1d58",null);e["default"]=d.exports},"498a":function(t,e,r){"use strict";var s=r("23e7"),o=r("58a8").trim,a=r("c8d2");s({target:"String",proto:!0,forced:a("trim")},{trim:function(){return o(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,r){var s=r("1d80"),o=r("5899"),a="["+o+"]",i=RegExp("^"+a+a+"*"),n=RegExp(a+a+"*$"),c=function(t){return function(e){var r=String(s(e));return 1&t&&(r=r.replace(i,"")),2&t&&(r=r.replace(n,"")),r}};t.exports={start:c(1),end:c(2),trim:c(3)}},"85bd":function(t,e,r){"use strict";r("296d")},"96cb":function(t,e,r){"use strict";r("aeb0")},"99af":function(t,e,r){"use strict";var s=r("23e7"),o=r("d039"),a=r("e8b5"),i=r("861d"),n=r("7b0b"),c=r("50c4"),u=r("8418"),l=r("65f0"),d=r("1dde"),h=r("b622"),f=r("2d00"),m=h("isConcatSpreadable"),v=9007199254740991,g="Maximum allowed index exceeded",p=f>=51||!o((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),b=d("concat"),y=function(t){if(!i(t))return!1;var e=t[m];return void 0!==e?!!e:a(t)},k=!p||!b;s({target:"Array",proto:!0,forced:k},{concat:function(t){var e,r,s,o,a,i=n(this),d=l(i,0),h=0;for(e=-1,s=arguments.length;e<s;e++)if(a=-1===e?i:arguments[e],y(a)){if(o=c(a.length),h+o>v)throw TypeError(g);for(r=0;r<o;r++,h++)r in a&&u(d,h,a[r])}else{if(h>=v)throw TypeError(g);u(d,h++,a)}return d.length=h,d}})},a434:function(t,e,r){"use strict";var s=r("23e7"),o=r("23cb"),a=r("a691"),i=r("50c4"),n=r("7b0b"),c=r("65f0"),u=r("8418"),l=r("1dde"),d=r("ae40"),h=l("splice"),f=d("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,v=Math.min,g=9007199254740991,p="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!h||!f},{splice:function(t,e){var r,s,l,d,h,f,b=n(this),y=i(b.length),k=o(t,y),C=arguments.length;if(0===C?r=s=0:1===C?(r=0,s=y-k):(r=C-2,s=v(m(a(e),0),y-k)),y+r-s>g)throw TypeError(p);for(l=c(b,s),d=0;d<s;d++)h=k+d,h in b&&u(l,d,b[h]);if(l.length=s,r<s){for(d=k;d<y-s;d++)h=d+s,f=d+r,h in b?b[f]=b[h]:delete b[f];for(d=y;d>y-s+r;d--)delete b[d-1]}else if(r>s)for(d=y-s;d>k;d--)h=d+s-1,f=d+r-1,h in b?b[f]=b[h]:delete b[f];for(d=0;d<r;d++)b[d+k]=arguments[d+2];return b.length=y-s+r,l}})},aeb0:function(t,e,r){},af40:function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("li",{staticClass:"list-item",on:{click:t.toDetail}},[r("div",{staticClass:"pic"},[r("img",{attrs:{src:"http://statics.zhuishushenqi.com"+t.book.cover}})]),r("div",{staticClass:"info"},[r("div",{staticClass:"title"},[t._v(t._s(t.book.title))]),r("div",{staticClass:"desc"},[t._v(" "+t._s(t.book.shortIntro)+" ")]),r("div",{staticClass:"bottom"},[r("span",{staticClass:"author"},[t._v(t._s(t.book.author))]),r("span",{staticClass:"cate"},[t._v(t._s(t.book.majorCate?t.book.majorCate:t.book.cat))])])])])},o=[],a={name:"ListItem",props:["book"],methods:{toDetail:function(){this.$router.push({name:"BookDetail",query:{id:this.book._id}})}}},i=a,n=(r("85bd"),r("2877")),c=Object(n["a"])(i,s,o,!1,null,"086dc97c",null);e["a"]=c.exports},b0c0:function(t,e,r){var s=r("83ab"),o=r("9bf2").f,a=Function.prototype,i=a.toString,n=/^\s*function ([^ (]*)/,c="name";s&&!(c in a)&&o(a,c,{configurable:!0,get:function(){try{return i.call(this).match(n)[1]}catch(t){return""}}})},c8d2:function(t,e,r){var s=r("d039"),o=r("5899"),a="​᠎";t.exports=function(t){return s((function(){return!!o[t]()||a[t]()!=a||o[t].name!==t}))}},fb6a:function(t,e,r){"use strict";var s=r("23e7"),o=r("861d"),a=r("e8b5"),i=r("23cb"),n=r("50c4"),c=r("fc6a"),u=r("8418"),l=r("b622"),d=r("1dde"),h=r("ae40"),f=d("slice"),m=h("slice",{ACCESSORS:!0,0:0,1:2}),v=l("species"),g=[].slice,p=Math.max;s({target:"Array",proto:!0,forced:!f||!m},{slice:function(t,e){var r,s,l,d=c(this),h=n(d.length),f=i(t,h),m=i(void 0===e?h:e,h);if(a(d)&&(r=d.constructor,"function"!=typeof r||r!==Array&&!a(r.prototype)?o(r)&&(r=r[v],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return g.call(d,f,m);for(s=new(void 0===r?Array:r)(p(m-f,0)),l=0;f<m;f++,l++)f in d&&u(s,l,d[f]);return s.length=l,s}})}}]);
//# sourceMappingURL=chunk-bdac2758.f5748090.js.map